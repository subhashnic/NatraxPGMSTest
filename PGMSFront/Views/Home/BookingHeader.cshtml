<div class="row">
    <div class="card">
        <div class="card-header card-header-rose card-header-icon">
            @*<div class="card-icon">
                    <i class="material-icons">assignment</i>
                </div>*@
            <table style="width:100%">
                <tr>
                    <td style="text-align:left">
                        <h6 class="card-title" style="margin-top: 5px;">
                            <strong><span>Date:</span></strong>&nbsp;<span id="BookingDate">@Model.DocDate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <strong><span>Document Type:</span></strong>&nbsp;<span id="BookingType">@Model.DocType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <strong><span>Document No.:</span></strong>&nbsp;<span id="BookingNo">@Model.DocNo</span>
                        </h6>
                    </td>
                    <td style="text-align:right">
                        @if (Model.WorkFlowId == 6 && Model.DocId > 0)
                        {
                            <input type="button" id="btnViewPI" value="View P.I." onclick="return ViewPI();" class="btn btn-fill btn-rose btn-sm" />
                            <input type="button" id="btnAcceptPI" value="Accept P.I." onclick="return AcceptPI();" class="btn btn-fill btn-rose btn-sm" />
                        }
                        else if (Model.WorkFlowId == 7 && Model.DocId > 0)
                        {
                            <input type="button" id="btnViewPI" value="View P.I." onclick="return ViewPI();" class="btn btn-fill btn-rose btn-sm" />
                        }
                        else if (Model.WorkFlowId == 8 && Model.DocId > 0)
                        {
                            <input type="button" id="btnViewPI" value="View P.I." onclick="return ViewPI();" class="btn btn-fill btn-rose btn-sm" />
                            <input type="button" id="btnUploadPO" value="Upload P.O." onclick="return UploadPO();" class="btn btn-fill btn-rose btn-sm" />
                        }
                        else if ((Model.WorkFlowId == 9 || Model.WorkFlowId == 10) && Model.DocId > 0)
                        {
                            <input type="button" id="btnViewPI" value="View P.I." onclick="return ViewPI();" class="btn btn-fill btn-rose btn-sm" />
                            <input type="button" id="btnViewPO" value="View P.O." onclick="return ViewPO();" class="btn btn-fill btn-rose btn-sm" />
                        }
                    </td>
                </tr>
            </table>

        </div>
        <div class="card-body">
            <div class="arrow-steps clearfix">
                @foreach (var itm in Model.WorkFlowView)
                {
                    if (@Model.WorkFlowId == itm.WorkFlowId)
                    {
                        <div class="step current"><span>@itm.WorkFlowName</span></div>
                    }
                    else
                    {
                        <div class="step"><span>@itm.WorkFlowName</span></div>
                    }
                }

                @*@if (@Model.WorkFlowId == 6)
                    {
                        <div id="WWF6" class="step current"><span>Booking</span></div>
                    }
                    else
                    {
                        <div id="WWF6" class="step"><span>Booking</span></div>
                    }
                    @if (@Model.WorkFlowId == 7)
                    {
                        <div id="WWF7" class="step current"><span>PI</span></div>
                    }
                    else
                    {
                        <div id="WWF7" class="step"><span>PI</span></div>
                    }
                    @if (@Model.WorkFlowId == 8)
                    {
                        <div id="WWF8" class="step current"><span>Approve</span></div>
                    }
                    else
                    {
                        <div id="WWF8" class="step"><span>Approve</span></div>
                    }
                    @if (@Model.WorkFlowId == 9)
                    {
                        <div id="WWF9" class="step current"><span>PO</span></div>
                    }
                    else
                    {
                        <div id="WWF9" class="step"><span>PO</span></div>
                    }
                    @if (@Model.WorkFlowId == 10)
                    {
                        <div id="WWF10" class="step current"><span>PO Verification</span></div>
                    }
                    else
                    {
                        <div id="WWF10" class="step"><span>PO Verification</span></div>
                    }*@

            </div>
        </div>
    </div>
</div>
<script>

    ///////////////////////////// View P.I.  //////////////////////////////////////////////////////
    function ViewPI() {
        var strReportName = "";
        if (parseInt($("#StateId").val()) == 20)//MP
        {
            strReportName = "rptBookingInvoiceGST";
        }
        else {
            strReportName = "rptBookingInvoiceIGST";
        }

        var strReportViewerUrl = $("#ReportURL").val();
        var strDocId = $("#DocId").val();
        var strBPId = $("#BPId").val();

        window.open(strReportViewerUrl + "?rptName=" + strReportName + "&DocId=" + strDocId + "&BPId=" + strBPId, '_blank');
        return false;
    }

    ///////////////////////////// View P.O.  //////////////////////////////////////////////////////
    function ViewPO() {
        var strReportName = "";
        if (parseInt($("#StateId").val()) == 20)//MP
        {
            strReportName = "rptBookingInvoiceGST";
        }
        else {
            strReportName = "rptBookingInvoiceIGST";
        }

        var strReportViewerUrl = $("#ReportURL").val();
        var strDocId = $("#DocId").val();
        var strBPId = $("#BPId").val();

        window.open(strReportViewerUrl + "?rptName=" + strReportName + "&DocId=" + strDocId + "&BPId=" + strBPId, '_blank');
        return false;
    }

    ///////////////////////////// Accept P.I.  //////////////////////////////////////////////////////
    function AcceptPI() {
        try {
            LoaderShow();
            var data = {};
            var dataWithAntiforgeryToken = $.extend(data, { "__RequestVerificationToken": $("input[name=__RequestVerificationToken]").val() });
            $.ajax({
                url: '@Url.Action("AcceptPI", "Home")',
                type: 'POST',
                dataType: 'json',
                async: true,
                data: dataWithAntiforgeryToken,
                success: function (data) {

                    LoaderHide();
                    if (data.StatusId != "99" && data.StatusId != "-99") {
                        BookingList = data.BookingList;
                       window.location.href = '@Url.Action("Basic", "Home")';
                    }
                    else {
                        alert(data.Status);
                    }
                },
                error: function (xhr) {

                    LoaderHide();
                    alert(xhr.responseText);
                }
            });
        }
        catch (e) {

            LoaderHide();
            alert(e.message);
            //  return false;
        }
    }   

</script>